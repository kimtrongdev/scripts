(function(g){g.fn.niceSelect=function(a){function f(a){a.after(g("<div></div>").addClass("nice-select").addClass(a.attr("class")||"").addClass(a.attr("disabled")?"disabled":"").attr("tabindex",a.attr("disabled")?null:"0").html("<span class=\"current\"></span><ul class=\"list\"></ul>"));var f=a.next(),b=a.find("option"),c=a.find("option:selected");f.find(".current").html(c.data("display")||c.text()),b.each(function(){var a=g(this),b=a.data("display");f.find("ul").append(g("<li></li>").attr("data-value",a.val()).attr("data-display",b||null).addClass("option"+(a.is(":selected")?" selected":"")+(a.is(":disabled")?" disabled":"")).html(a.text()))})}if("string"==typeof a)return"update"==a?this.each(function(){var a=g(this),b=g(this).next(".nice-select"),c=b.hasClass("open");b.length&&(b.remove(),f(a),c&&a.next().trigger("click"))}):"destroy"==a&&(this.each(function(){var a=g(this),b=g(this).next(".nice-select");b.length&&(b.remove(),a.css("display",""))}),0==g(".nice-select").length&&g(document).off(".nice_select")),this;this.hide(),this.each(function(){var a=g(this);a.next().hasClass("nice-select")||f(a)}),g(document).off(".nice_select"),g(document).on("click.nice_select",".nice-select",function(){var a=g(this);g(".nice-select").not(a).removeClass("open"),a.toggleClass("open"),a.hasClass("open")?(a.find(".option"),a.find(".focus").removeClass("focus"),a.find(".selected").addClass("focus")):a.focus()}),g(document).on("click.nice_select",function(a){0===g(a.target).closest(".nice-select").length&&g(".nice-select").removeClass("open").find(".option")}),g(document).on("click.nice_select",".nice-select .option:not(.disabled)",function(){var a=g(this),b=a.closest(".nice-select");b.find(".selected").removeClass("selected"),a.addClass("selected");var c=a.data("display")||a.text();b.find(".current").text(c),b.prev("select").val(a.data("value")).trigger("change")}),g(document).on("keydown.nice_select",".nice-select",function(a){var b=g(this),c=g(b.find(".focus")||b.find(".list .option.selected"));if(32==a.keyCode||13==a.keyCode)return b.hasClass("open")?c.trigger("click"):b.trigger("click"),!1;if(40==a.keyCode){if(!b.hasClass("open"))b.trigger("click");else{var d=c.nextAll(".option:not(.disabled)").first();0<d.length&&(b.find(".focus").removeClass("focus"),d.addClass("focus"))}return!1}if(38==a.keyCode){if(!b.hasClass("open"))b.trigger("click");else{var e=c.prevAll(".option:not(.disabled)").first();0<e.length&&(b.find(".focus").removeClass("focus"),e.addClass("focus"))}return!1}if(27==a.keyCode)b.hasClass("open")&&b.trigger("click");else if(9==a.keyCode&&b.hasClass("open"))return!1});var b=document.createElement("a").style;return b.cssText="pointer-events:auto","auto"!==b.pointerEvents&&g("html").addClass("no-csspointerevents"),this}})(jQuery);